@import "tailwindcss";
@import "tw-animate-css";

/* ============================================
   Inter - UI Font
   ============================================ */
@font-face {
  font-family: "Inter";
  src: url("https://cdn.jsdelivr.net/npm/@fontsource/inter@5.1.1/files/inter-latin-400-normal.woff2")
    format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Inter";
  src: url("https://cdn.jsdelivr.net/npm/@fontsource/inter@5.1.1/files/inter-latin-500-normal.woff2")
    format("woff2");
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Inter";
  src: url("https://cdn.jsdelivr.net/npm/@fontsource/inter@5.1.1/files/inter-latin-600-normal.woff2")
    format("woff2");
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

/* ============================================
   JetBrains Mono - Code / Technical Data Font
   ============================================ */
@font-face {
  font-family: "JetBrains Mono";
  src: url("https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@5.0.21/files/jetbrains-mono-latin-400-normal.woff2")
    format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "JetBrains Mono";
  src: url("https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@5.0.21/files/jetbrains-mono-latin-500-normal.woff2")
    format("woff2");
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "JetBrains Mono";
  src: url("https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@5.0.21/files/jetbrains-mono-latin-600-normal.woff2")
    format("woff2");
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

/* IBM Plex Mono as fallback */
@font-face {
  font-family: "IBM Plex Mono";
  src: url("https://cdn.jsdelivr.net/npm/@fontsource/ibm-plex-mono@5.0.13/files/ibm-plex-mono-latin-400-normal.woff2")
    format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "IBM Plex Mono";
  src: url("https://cdn.jsdelivr.net/npm/@fontsource/ibm-plex-mono@5.0.13/files/ibm-plex-mono-latin-500-normal.woff2")
    format("woff2");
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "IBM Plex Mono";
  src: url("https://cdn.jsdelivr.net/npm/@fontsource/ibm-plex-mono@5.0.13/files/ibm-plex-mono-latin-600-normal.woff2")
    format("woff2");
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

@custom-variant dark (&:is(.dark *));

/* ============================================
   TunnelFiles - Precision Engineering Theme
   Clean, restrained design system
   ============================================ */

:root {
  /* Typography - Dual font system */
  --font-sans: "Inter", system-ui, -apple-system, sans-serif;
  --font-mono: "JetBrains Mono", "IBM Plex Mono", "SF Mono", "Fira Code", monospace;

  font-family: var(--font-sans);
  font-size: 16px;
  line-height: 1.6;
  font-weight: 400;

  /* Rendering */
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* Border Radius - Slightly rounded */
  --radius: 0.375rem;

  /* === Dark Theme (Default - Precision Engineering) === */

  /* Core Colors - Near-achromatic backgrounds, restrained blue */
  --background: oklch(0.13 0.005 260);
  --foreground: oklch(0.93 0.005 260);

  /* Card & Popover - Elevated surfaces */
  --card: oklch(0.16 0.005 260);
  --card-foreground: oklch(0.93 0.005 260);
  --popover: oklch(0.18 0.006 260);
  --popover-foreground: oklch(0.93 0.005 260);

  /* Primary - Steel blue */
  --primary: oklch(0.65 0.14 250);
  --primary-foreground: oklch(0.98 0.002 260);

  /* Secondary - Neutral gray */
  --secondary: oklch(0.2 0.005 260);
  --secondary-foreground: oklch(0.78 0.005 260);

  /* Muted - Subtle backgrounds */
  --muted: oklch(0.18 0.005 260);
  --muted-foreground: oklch(0.55 0.01 260);

  /* Accent - Teal-blue */
  --accent: oklch(0.6 0.12 230);
  --accent-foreground: oklch(0.98 0.002 260);

  /* Destructive - Muted red */
  --destructive: oklch(0.58 0.18 22);
  --destructive-foreground: oklch(0.98 0 0);

  /* Borders & Inputs */
  --border: oklch(0.25 0.008 260);
  --input: oklch(0.18 0.005 260);
  --ring: oklch(0.65 0.14 250);

  /* === Semantic Colors === */

  /* Status */
  --success: oklch(0.62 0.14 155);
  --warning: oklch(0.72 0.12 80);
  --info: oklch(0.6 0.12 230);

  /* File Type Indicators */
  --file-folder: oklch(0.72 0.12 80);
  --file-document: oklch(0.55 0.01 260);
  --file-image: oklch(0.62 0.14 320);
  --file-code: oklch(0.62 0.14 155);
  --file-archive: oklch(0.6 0.1 55);
  --file-audio: oklch(0.62 0.12 290);
  --file-video: oklch(0.58 0.14 15);

  /* Transfer Status */
  --transfer-upload: oklch(0.62 0.14 155);
  --transfer-download: oklch(0.6 0.12 230);
  --transfer-pending: oklch(0.55 0.01 260);

  /* Selection */
  --selection: oklch(0.65 0.14 250 / 0.12);
  --selection-active: oklch(0.65 0.14 250 / 0.22);

  /* Terminal Colors (hex values for xterm.js compatibility) */
  --terminal-background: #1a1a22;
  --terminal-foreground: #d4d4d8;
  --terminal-cursor: #6b9eff;
  --terminal-cursor-accent: #1a1a22;
  --terminal-selection: rgba(107, 158, 255, 0.25);
  --terminal-black: #1a1a22;
  --terminal-red: #e05566;
  --terminal-green: #4caf7a;
  --terminal-yellow: #d4a040;
  --terminal-blue: #6b9eff;
  --terminal-magenta: #c084d8;
  --terminal-cyan: #56b6c2;
  --terminal-white: #d4d4d8;
  --terminal-bright-black: #555566;
  --terminal-bright-red: #f06070;
  --terminal-bright-green: #5cc08a;
  --terminal-bright-yellow: #e4b050;
  --terminal-bright-blue: #7baaff;
  --terminal-bright-magenta: #d094e8;
  --terminal-bright-cyan: #66c6d2;
  --terminal-bright-white: #ffffff;

  /* Charts */
  --chart-1: oklch(0.65 0.14 250);
  --chart-2: oklch(0.6 0.12 230);
  --chart-3: oklch(0.72 0.12 80);
  --chart-4: oklch(0.62 0.14 320);
  --chart-5: oklch(0.58 0.18 22);

  /* Sidebar */
  --sidebar: oklch(0.14 0.005 260);
  --sidebar-foreground: oklch(0.78 0.005 260);
  --sidebar-primary: oklch(0.65 0.14 250);
  --sidebar-primary-foreground: oklch(0.98 0.002 260);
  --sidebar-accent: oklch(0.65 0.14 250 / 0.1);
  --sidebar-accent-foreground: oklch(0.93 0.005 260);
  --sidebar-border: oklch(0.22 0.006 260);
  --sidebar-ring: oklch(0.65 0.14 250);
}

/* === Light Theme (Clean White) === */
.light {
  --background: oklch(0.975 0.003 260);
  --foreground: oklch(0.18 0.01 260);

  --card: oklch(0.99 0.002 260);
  --card-foreground: oklch(0.18 0.01 260);
  --popover: oklch(0.99 0.002 260);
  --popover-foreground: oklch(0.18 0.01 260);

  /* Primary - Steel blue at lower luminance */
  --primary: oklch(0.5 0.14 250);
  --primary-foreground: oklch(0.99 0.002 260);

  --secondary: oklch(0.94 0.003 260);
  --secondary-foreground: oklch(0.35 0.01 260);

  --muted: oklch(0.95 0.003 260);
  --muted-foreground: oklch(0.45 0.01 260);

  --accent: oklch(0.48 0.12 230);
  --accent-foreground: oklch(0.99 0.002 260);

  --destructive: oklch(0.52 0.18 22);
  --destructive-foreground: oklch(0.98 0 0);

  --border: oklch(0.88 0.005 260);
  --input: oklch(0.93 0.003 260);
  --ring: oklch(0.5 0.14 250);

  /* Semantic */
  --success: oklch(0.5 0.14 155);
  --warning: oklch(0.58 0.12 80);
  --info: oklch(0.48 0.12 230);

  --file-folder: oklch(0.58 0.12 80);
  --file-document: oklch(0.45 0.01 260);
  --file-image: oklch(0.5 0.14 320);
  --file-code: oklch(0.5 0.14 155);
  --file-archive: oklch(0.48 0.1 55);
  --file-audio: oklch(0.5 0.12 290);
  --file-video: oklch(0.46 0.14 15);

  --transfer-upload: oklch(0.5 0.14 155);
  --transfer-download: oklch(0.48 0.12 230);
  --transfer-pending: oklch(0.5 0.01 260);

  --selection: oklch(0.5 0.14 250 / 0.1);
  --selection-active: oklch(0.5 0.14 250 / 0.18);

  /* Terminal Colors (light theme) */
  --terminal-background: #f5f5f7;
  --terminal-foreground: #2a2a35;
  --terminal-cursor: #3d6ec0;
  --terminal-cursor-accent: #f5f5f7;
  --terminal-selection: rgba(61, 110, 192, 0.2);
  --terminal-black: #2a2a35;
  --terminal-red: #c43c50;
  --terminal-green: #2d7a4e;
  --terminal-yellow: #b8860b;
  --terminal-blue: #3d6ec0;
  --terminal-magenta: #9050a0;
  --terminal-cyan: #2a8fa0;
  --terminal-white: #f5f5f7;
  --terminal-bright-black: #555566;
  --terminal-bright-red: #e05566;
  --terminal-bright-green: #3d9a5e;
  --terminal-bright-yellow: #d9a61b;
  --terminal-bright-blue: #4d7ed0;
  --terminal-bright-magenta: #a060b0;
  --terminal-bright-cyan: #3aafb0;
  --terminal-bright-white: #ffffff;

  --chart-1: oklch(0.5 0.14 250);
  --chart-2: oklch(0.48 0.12 230);
  --chart-3: oklch(0.58 0.12 80);
  --chart-4: oklch(0.5 0.14 320);
  --chart-5: oklch(0.52 0.18 22);

  --sidebar: oklch(0.96 0.003 260);
  --sidebar-foreground: oklch(0.25 0.01 260);
  --sidebar-primary: oklch(0.5 0.14 250);
  --sidebar-primary-foreground: oklch(0.99 0.002 260);
  --sidebar-accent: oklch(0.5 0.14 250 / 0.08);
  --sidebar-accent-foreground: oklch(0.25 0.01 260);
  --sidebar-border: oklch(0.9 0.003 260);
  --sidebar-ring: oklch(0.5 0.14 250);
}

/* === Theme Mapping for Tailwind === */
@theme inline {
  --font-family-sans: var(--font-sans);
  --font-family-mono: var(--font-mono);

  /* Radius Scale */
  --radius-sm: 4px;
  --radius-md: var(--radius);
  --radius-lg: calc(var(--radius) + 2px);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 6px);
  --radius-3xl: calc(var(--radius) + 8px);
  --radius-4xl: calc(var(--radius) + 10px);

  /* Core Colors */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  /* Semantic Colors */
  --color-success: var(--success);
  --color-warning: var(--warning);
  --color-info: var(--info);

  /* File Type Colors */
  --color-file-folder: var(--file-folder);
  --color-file-document: var(--file-document);
  --color-file-image: var(--file-image);
  --color-file-code: var(--file-code);
  --color-file-archive: var(--file-archive);
  --color-file-audio: var(--file-audio);
  --color-file-video: var(--file-video);

  /* Transfer Colors */
  --color-transfer-upload: var(--transfer-upload);
  --color-transfer-download: var(--transfer-download);
  --color-transfer-pending: var(--transfer-pending);

  /* Selection */
  --color-selection: var(--selection);
  --color-selection-active: var(--selection-active);

  /* Charts */
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  /* Sidebar */
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

/* === Base Styles === */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  html,
  body {
    overscroll-behavior: none;
  }

  body {
    @apply bg-background text-foreground;
    -webkit-user-select: none;
    user-select: none;
  }

  .selectable,
  input,
  textarea,
  [contenteditable="true"] {
    -webkit-user-select: text;
    user-select: text;
  }

  html {
    scroll-behavior: smooth;
  }

  /* Clean scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--muted-foreground);
  }

  ::-webkit-scrollbar-corner {
    background: transparent;
  }

  /* Focus states - outline only, no glow */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-ring;
  }

  /* Selection highlight */
  ::selection {
    background: var(--selection-active);
    color: var(--foreground);
  }

  /* Button press feedback */
  [data-slot="button"]:active {
    transform: scale(0.97);
  }
}

/* === Utility Classes === */
@layer utilities {
  /* File selection highlight */
  .file-selected {
    background-color: var(--selection);
  }

  .file-selected-active {
    background-color: var(--selection-active);
  }

  /* Connection status indicators - static dots */
  .status-connected {
    color: var(--success);
  }

  .status-disconnected {
    color: var(--muted-foreground);
  }

  .status-error {
    color: var(--destructive);
  }

  /* Drop zone */
  .drop-zone-active {
    @apply border-2 border-dashed;
    border-color: var(--primary);
    background: var(--selection);
  }

  /* Card shadow */
  .shadow-card {
    box-shadow:
      0 1px 3px rgb(0 0 0 / 0.08),
      0 2px 8px rgb(0 0 0 / 0.15);
  }

  /* Toolbar style */
  .toolbar {
    @apply bg-card border-b border-border;
  }

  /* Alternating rows */
  .row-alternate:nth-child(even) {
    @apply bg-muted/20;
  }
}

/* === Animations === */
@layer utilities {
  /* Fade in - clean */
  .animate-fade-in {
    animation: fadeIn 0.2s ease-out both;
  }

  @keyframes fadeIn {
    0% {
      opacity: 0;
      transform: translateY(4px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

/* === Component Overrides === */
@layer components {
  /* Status indicator dot - static, no effects */
  .status-dot {
    @apply w-2 h-2 rounded-full;
  }

  .status-dot-connected {
    @apply bg-success;
  }

  .status-dot-disconnected {
    @apply bg-muted-foreground;
  }

  .status-dot-error {
    @apply bg-destructive;
  }
}

/* === Reduced Motion === */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  html {
    scroll-behavior: auto;
  }
}

/* ============================================
   XTerm Terminal Custom Styles
   ============================================ */

.terminal-container {
  padding: 4px 0 0 4px;
  background: var(--terminal-background);
  box-sizing: border-box;
}

/* Ensure xterm fills container */
.terminal-container .xterm,
.terminal-container .xterm-viewport,
.terminal-container .xterm-screen {
  height: 100% !important;
  background: var(--terminal-background) !important;
}

/* XTerm viewport scrollbar */
.terminal-container .xterm-viewport::-webkit-scrollbar {
  width: 8px;
}

.terminal-container .xterm-viewport::-webkit-scrollbar-track {
  background: transparent;
  border-left: 1px solid color-mix(in oklch, var(--border) 30%, transparent);
}

.terminal-container .xterm-viewport::-webkit-scrollbar-thumb {
  background: color-mix(in oklch, var(--muted-foreground) 30%, transparent);
  border-radius: 3px;
  border: 2px solid transparent;
  background-clip: padding-box;
  transition: background 0.2s ease;
}

.terminal-container:hover .xterm-viewport::-webkit-scrollbar-thumb {
  background: color-mix(in oklch, var(--muted-foreground) 50%, transparent);
}

.terminal-container .xterm-viewport::-webkit-scrollbar-thumb:hover {
  background: color-mix(in oklch, var(--muted-foreground) 70%, transparent);
}

.terminal-container .xterm-viewport::-webkit-scrollbar-thumb:active {
  background: color-mix(in oklch, var(--muted-foreground) 90%, transparent);
}

/* Selection highlight */
.terminal-container .xterm-selection div {
  background-color: color-mix(in oklch, var(--accent) 30%, transparent) !important;
}
